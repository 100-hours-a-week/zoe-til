# TIL Template
날짜: 2025-02-06

<br/>

## 스크럼
**학습 목표:**
````
[1] 강의 개념 정리
[2] 2주차 과제 시작
````
<br/>
<br/>

## 새로 배운 내용
````
- 동시성과 병렬성
- 스케줄러과 컨텍스트 스위칭
````

<br/>

### 동시성과 병렬성
#### 동시성
- CPU가 빠르게 문맥 교환하여 마치 여러 작업이 동시에 실행되고 있는 것처럼 보이는 방식

#### 병렬성
- 하드웨어의 지원으로 실제로 작업을 병렬적으로 동시에 처리하는 방식

#### 동시성과 병렬성의 차이
- 동시성은 논리적 관점의 병렬 처리 기법으로, 가상 공간에서 작업들이 병렬적으로 처리되는 것처럼 보이게 하기 위한 방법이다.
- 병렬성은 하드웨어 관점의 병렬 처리 기법으로 다중 코어 CPU나 다중 프로세서를 사용하여 실제로 작업들을 병렬적으로 처리한다.

#### 멀티 쓰레드에서 동시성과 병렬성
- 동시성은 멀티 스레드의 싱글 코어에 적용되는 개념이고, 병렬성은 다중 코어에 적용되는 개념이다.
- 즉, 컴퓨터 하드웨어의 여러코어/프로세서에서 작업을 동시에 처리하는 것은 병렬성이고, 각각의 코어 환경을 소프트웨어적으로 구성한 가상 공간에서 병렬적으로 처리하는 것은 동시성이다.

<br/>
<br/>

### 스케줄러 (Scheduler)

CPU와 메모리 등 시스템 자원을 적절히 분배하기 위해 프로세스/스레드의 실행 순서 관리

#### 핵심 역할

- CPU 최대 이용 → 시스템 성능 극대화
- 단위 시간당 처리 가능한 작업의 수 증가 → 시스템 처리량 최적화
- 작업의 총 처리 시간 감소
- 작업의 대기 시간 감소 → 자원의 빠른 순환
- 응답 시간 감소 → 작업 시작 후 첫 응답까지 소요되는 시간 감소 → 빠른 사용자 피드백 제공

#### 동작 방식
<details>
<summary>스케줄링 알고리즘</summary>

**비선점형:** 각 작업이 종료될 때까지 계속 실행
1. FIFO(First In First Out), FCFS(First Come First Served):** 먼저 도착한 작업을 먼저 실행
    - **convoy effect:** CPU를 많이 필요로 하지 않는 작업들이, CPU를 오랫동안 사용하는 작업이 끝나기를 기다리는 현상   
2. **SJF(Shortest Jop First):** 실행시간(Burst Time)이 가장 짧은 프로세스부터 실행
    - 모든 작업이 동시에 도착할 때 최적

**선점형:** 다른 프로세스를 실행시키기 위해 현재 프로세스의 실행 중단 가능
1. STCF(Shortest Time-to-Completion First), PSJF: 현재 실행 중인 작업의 잔여 실행 시간과 새로운 작업의 잔여 실행 시간을 비교하여 더 작은 작업을 스케줄
2. **RR(Round-Robin)**, time slicing**:** 일정 시간 실행 후 실행 큐의 다음 작업으로 진행
    - time slice / scheduling quantum: 작업이 실행되는 일정 시간, 타이머 인터럽트 주기의 배수
        - 짧을 경우: context switching 비용 증가
        - 길 경우: RR 성능 감소
3. **MLFQ(Multi-level Feedback Queue):** 각각 다른 우선순위의 큐들이 존재한다.
    1. 더 높은 우선순위의 작업만 실행한다.
    2. 같은 우선순위라면 RR 방식으로 두 작업 모두 실행한다.
    3. 작업이 시스템에 진입하면 가장 높은 우선순위에 놓여진다.
    4. CPU 총 사용 시간 측정 → 주어진 단계에서 시간 할당량을 소진하면 우선순위가 낮아진다.
        - *프로그램이 스케줄러를 속이는 방식으로 실행될 수 있다. ⇒ 해결*
        - *프로그램이 시간 흐름에 따라 특성(CPU 위주 / 대화형) 변화 가능 ⇒ 해결*
    5. 일정 기간 S가 지나면 시스템의 모든 작업을 최상위 큐로 이동시킨다.
        - *기아 상태(starvation) 발생: 너무 많은 대화형 작업이 CPU 시간 모두 소진 가능 ⇒ 해결*
</details>

1. **작업 대기열 관리:** 대기 중인 작업을 대기열(Queue)에 배치
2. **우선순위 설정:** 작업의 우선순위 분석 → 실행 순서 결정
3. **자원 분배:** CPU, 메모리 등
4. **자원 전환:** Context Switching
5. **완료 및 자원 해제**

<br/>

**프로세스 스케줄링 vs 스레드 스케줄링**
- 스레드 스케줄링은 프로세스 스케줄링과 다르게 다른 스레드들과의 상호작용과 동기화 문제를 고려해야 한다.
- 스케줄링에는 Context Switching이 발생하는데 프로세스는 PCB에서 관리되고, 스레드는 TCB에서 관리된다.
    - 스레드가 프로세스에 포함된 개념인 것처럼 TCB 또한 PCB에 포함되어 있다.

<br/>
<br/>

### 컨텍스트 스위칭
프로세스/스레드의 작업을 교체하기 위해 현재 실행 중인 작업의 상태를 저장하고, 다음 작업의 상태를 복원하여 실행한다.

#### 컨텍스트 스위칭의 부정적인 영향
문맥 교환을 위해 저장/복원하는 과정에서 오버헤드가 발생한다.

#### 스레드풀
미리 스레드를 생성하여 저장해두고 재활용하여 사용하는 방식

**사용 이유:** 스레드 생성→소멸에 소비되는 오버헤드를 줄일 수 있다.

<br/>
<br/>

**암달의 법칙**
프로세서의 개수가 아무리 늘어나도, 즉 아무리 작업을 병렬적으로 처리해도 성능 향상에 한계가 존재한다.

- ↔ 구스타프슨의 법칙: 대용량 데이터 처리는 병렬적으로 처리할수록 성능이 향상된다.

<br/>

**c10k 문제**
Current 10 thousand clients, 1만개의 클라이언트를 동시(1초)에 처리할 수 있는 네트워크 I/O 설계 방법

<br/>
<br/>

## 오늘의 회고
- 헷갈리는 개념들에 주의해야 한다. 팀과의 개념 정리를 통해 개념을 다시 확인하고, 새로운 정보도 배울 수 있었다.
- 난 이론적으로 이해하려는 면이 강한데, 팀원들 중 몇 분은 실제 응용에 고려를 끊임없이 하셔서 새로운 관점을 배울 수 있다.

<!-- ### 참고 자료 및 링크
- [링크 제목](URL)
- [링크 제목](URL) -->