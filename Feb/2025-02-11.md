# TIL Template
날짜: 2025-02-11

<br/>

## 스크럼
**학습 목표:**
- 특강 내용 정리: 크램폴린 IDE
- 2주차 과제 마무리


<br/>
<br/>

## 새로 배운 내용
````
- 컨테이너 기반 배포
- 크램플린 IDE
````

<br/>

### 컨테이너 기술 톺아보기
#### **로컬 기반 전통적 배포**
물리적 컴퓨터 한 대에 하나의 OS를 깔고 앱이 요구하는 기준에 맞춰 기술들을 설치한다.

**문제점**
- 여러 프로그램 동작시 다른 프로그램의 영향을 받아 특정 프로그램의 성능이 저하될 수 있다.
- 프로그램 분리를 위해서는 새로운 로컬 컴퓨터가 필요하므로 비용이 발생한다.

#### **VM 기반 가상화 배포**
하나의 물리적 컴퓨터에 하이퍼바이저를 이용하여 여러 개의 VM을 두고 각각 독립적으로 동작시킨다.

**문제점**

- VM은 완전한 컴퓨터로, 각각 개별적인 OS 설치가 필요해 무겁다.
- 하이퍼바이저로 VM을 처리하는데 오버헤드가 발생한다.

<br/>

#### 컨테이너 기반의 배포
**컨테이너(Container):** 앱을 구동하기 위해 필요한 패키지가 완비된 실행 환경<br/>
**컨테이너 이미지:** 컨테이너 환경을 묶어서 배포하는 프로그램

**장점**
1. 각각의 서비스를 격리된 환경에서 배포할 수 있다.
2. VM에 비해 더 가볍게 가상화를 할 수 있다.
3. 유연하게 확장할 수 있다.

<br/>

#### 쿠버네티스 (**Kubernetes, k8s)**
컨테이너를 관리할 수 있도록 여러 기능을 제공하는 오픈소스 컨테이너 오케스트레이션 플랫폼
- Auto Scaling: 시스템 부하에 따라 컨테이너 수를 자동으로 조절
- Auto Healing: 장애가 난 컨테이너를 감지하고 재시작하거나 교체하여 복구

**장점**
1. 컨테이너의 유연한 확장을 가능하게 한다.
2. 컨테이너를 활용하는 다양한 배포 및 운영 기법을 자동화한다.

⇒ 자원 절약, 서비스 안정적으로 운영

**개념**<br/>
- **Namespaces:** 단일 Cluster 내에서의 자원을 논리적으로 나누어 사용하기 위한 개념
    - **Pod:** 쿠버네티스에서 생성, 관리, 배포 가능한 가장 작은 컴퓨팅 단위, 컨테이너의 집합
    - **ReplicaSet:** 일정 개수의 Pod를 유지하는 컨트롤러    
    → AutoScaler와 함께 사용하면 복제본 개수를 자동 조절
        
    - **Deployment:** 업데이트가 있을 때 (새로운 사양의 ReplicaSet을 작성하고) Pod를 새로운 버전으로 업데이트
        - 다양한 배포 방식 지원: Recreate, RollingUpdate, Blue/Green, Canary 등
    - **Service(SVC):** Pod 그룹에 트래픽을 분산하여 전달

- **Ingress:** 클러스터 외부에서 내부로 접근하는 요청들을 어떻게 처리할지 정의해둔 규칙의 모음

    - Ingress → Service → Deployment → Pod1, Pod2, Pod3, …

- **IaC(Infra as Code):** 모든 쿠버네티스 오브젝트들은 코드로 작성된다.

<br/>

### 크램폴린 IDE

#### 기획 의도

보다 편리하고 쉽게 카카오 자원을 배포할 수 있다.

#### 사용 플로우 및 개념 설명
1. **크램폴린 IDE를 이용해서 애플리케이션을 개발한다.**
    - 컨테이너(작업 공간) 생성: 실행과 테스트 가능, 배포 X
2. **해당 애플리케이션을 도커 이미지로 빌드하는 Dockerfile을 작성한다.**
    - Dockerfile을 포함한 전체 프로젝트를 GitHub(main)에 올린다.
    - **Docker:** 컨테이너를 만들고 사용할 수 있도록 하는 컨테이너화 기술
        - **도커 이미지:** 애플리케이션 실행 패키지(최대 3개까지 생성 가능)
        - **Dockerfile:** 도커 이미지를 빌드하는 데 사용되는 설정 파일
3. **D2Hub 레포지토리에 이미지를 빌드 및 업로드한다.**
    - GitHub 주소를 이용하여 D2Hub 레포지토리에 컨테이너 이미지를 빌드한다.
4. **애플리케이션 이미지 배포를 위한 쿠버네티스 yaml 파일을 작성한다.**
    - 애플리케이션을 배포할 수 있는 쿠버네티스 Object를 작성한다.
    - YAML 파일을 GitHub에 올린다.
5. **Kargo를 통해 DKOS 클러스터에 D2Hub 이미지를 배포한다.**
    - **Kargo:** 쿠버네티스에 지속적인 배포 기능을 제공하는 CI/CD 도구
        - `목표 상태 = 실패`: yaml 파일에 문제 존재
        - `git 불러오기`: 목표 상태 업데이트
    - 외부 접속 URL 발급 → 배포된 앱에 접근 가능

<br/>

#### 주의사항

1. 커밋은 main 브랜치에 작성
2. GitHub 소스 코드 상에 변경 사항 발생시, D2Hub 재빌드 → Kargo 재배포
3. 크램폴린 IDE 개발 환경은 인당 1개씩 생성
4. DB는 쿠버네티스 구성 안에서 구성


<br/>
<br/>

## 오늘의 도전 과제와 해결 방법
**특강 내용 정리:** 특강을 듣고 내용을 정리했다.<br/>
**2주차 과제 마무리:** 제출 완료. <br/>

<br/>
<br/>

## 오늘의 회고
- 과제를 급하게 끝내느라 정신이 없어서 크램폴린 실습에는 제대로 참여하지 못했다. 실습을 따로 진행해보는 게 좋을 것 같다.
- 그런데 이걸로 배포를 진행하는 거면 AWS 사용에 대해서는 못 배우나? AWS 사용도 스펙으로들 많이 보던데.

<!-- ### 참고 자료 및 링크
- [링크 제목](URL)
- [링크 제목](URL) -->